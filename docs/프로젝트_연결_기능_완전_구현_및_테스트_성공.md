# í”„ë¡œì íŠ¸ ì—°ê²° ê¸°ëŠ¥ ì™„ì „ êµ¬í˜„ ë° í…ŒìŠ¤íŠ¸ ì„±ê³µ âœ…

**WorkflowMCP ì‘ì—… ID: `3632e02a-bc2a-46ef-a023-4a56ab5dffda`** ì™„ë£Œ

## ğŸ¯ êµ¬í˜„ ì™„ë£Œëœ ê¸°ëŠ¥

### 1. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ âœ…
- **`project_links` í…Œì´ë¸”** ìƒì„± ì™„ë£Œ
- **ë‹¤ëŒ€ë‹¤ ê´€ê³„ ì§€ì›**: í”„ë¡œì íŠ¸ â†” PRD/Task/Design 
- **ìŠ¤í‚¤ë§ˆ**: `id`, `project_id`, `entity_type`, `entity_id`, `link_type`, `created_at`, `created_by`

### 2. API ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ âœ…
- **`/api/projects/[id]/links`** ì™„ì „ êµ¬í˜„
- **POST**: ì—°ê²° ìƒì„± - âœ… í…ŒìŠ¤íŠ¸ í†µê³¼ (`linkId: 1, 2` ìƒì„± ì„±ê³µ)
- **GET**: ì—°ê²° ì¡°íšŒ - âœ… í…ŒìŠ¤íŠ¸ í†µê³¼ (PRD/Task ì •ë³´ í¬í•¨í•˜ì—¬ ë°˜í™˜)
- **DELETE**: ì—°ê²° í•´ì œ - âœ… í…ŒìŠ¤íŠ¸ í†µê³¼ (Task ì—°ê²° ì‚­ì œ ì„±ê³µ)

### 3. í”„ë¡ íŠ¸ì—”ë“œ UI ì—°ë™ âœ…
- **í”„ë¡œì íŠ¸ ìƒì„¸ í˜ì´ì§€**: `dashboard/src/routes/projects/[id]/+page.svelte`
- **ì‹¤ì‹œê°„ ë°ì´í„° í‘œì‹œ**: "ì—°ê²°ëœ PRD (1ê°œ)" ì •í™•íˆ í‘œì‹œ
- **ì—°ê²°ëœ í•­ëª© ìƒì„¸**: PRD ì œëª©, ìƒíƒœ, ìš°ì„ ìˆœìœ„ í‘œì‹œ
- **ë¹ˆ ìƒíƒœ ì²˜ë¦¬**: "ì•„ì§ ì—°ê²°ëœ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤" ì˜¬ë°”ë¥´ê²Œ í‘œì‹œ

## ğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼

### API í…ŒìŠ¤íŠ¸ ê²°ê³¼
```json
âœ… POST /projects/{id}/links
{"success": true, "linkId": 1, "message": "prd ì—°ê²° ì™„ë£Œ"}
{"success": true, "linkId": 2, "message": "task ì—°ê²° ì™„ë£Œ"}

âœ… GET /projects/{id}/links  
{
  "success": true,
  "links": {
    "prds": [{"title": "AI ì±„íŒ…ë´‡ ì„œë¹„ìŠ¤", "status": "draft", "priority": "Low"}],
    "tasks": [{"title": "ì˜ì¡´ì„± í…ŒìŠ¤íŠ¸ - í›„í–‰ Task", "status": "in_progress"}]
  },
  "total": 2
}

âœ… DELETE /projects/{id}/links
{"success": true, "message": "task ì—°ê²° í•´ì œ ì™„ë£Œ"}
```

### ë°ì´í„°ë² ì´ìŠ¤ ê²€ì¦ âœ…
```sql
-- ì—°ê²° ìƒì„± í›„
SELECT * FROM project_links;
-- ê²°ê³¼: 2ê°œ ë ˆì½”ë“œ (PRD + Task)

-- ì‚­ì œ í›„  
SELECT * FROM project_links;
-- ê²°ê³¼: 1ê°œ ë ˆì½”ë“œ (PRDë§Œ ë‚¨ìŒ)
```

### UI í…ŒìŠ¤íŠ¸ ê²°ê³¼ âœ…
- **í”„ë¡œì íŠ¸ ìƒì„¸ í˜ì´ì§€**: http://localhost:3302/projects/25218211-d140-4ff8-9c77-7698fc7f65ee
- **ì—°ê²°ëœ PRD í‘œì‹œ**: "ì—°ê²°ëœ PRD (1ê°œ)" ì •í™•íˆ í‘œì‹œ
- **PRD ì •ë³´ í‘œì‹œ**: "AI ì±„íŒ…ë´‡ ì„œë¹„ìŠ¤ draft Low" ì˜¬ë°”ë¥´ê²Œ ë Œë”ë§
- **ì‘ì—… ì—†ìŒ í‘œì‹œ**: "ì•„ì§ ì—°ê²°ëœ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤" ì •ìƒ í‘œì‹œ

## ğŸ”§ í•´ê²°ëœ í•µì‹¬ ë¬¸ì œ

1. **ë‹¤ëŒ€ë‹¤ ê´€ê³„ êµ¬í˜„**: `prd_task_links` â†’ `project_links` í…Œì´ë¸”ë¡œ í™•ì¥
2. **API ì—”ë“œí¬ì¸íŠ¸ ì™„ì „ êµ¬í˜„**: POST/GET/DELETE ëª¨ë“  ë©”ì„œë“œ ë™ì‘ í™•ì¸
3. **ë°ì´í„° ì§€ì†ì„±**: ì—°ê²° ìƒì„±/ì‚­ì œê°€ ë°ì´í„°ë² ì´ìŠ¤ì— ì •í™•íˆ ë°˜ì˜
4. **UI ì‹¤ì‹œê°„ ë°˜ì˜**: API ì‘ë‹µì´ í”„ë¡ íŠ¸ì—”ë“œì— ì˜¬ë°”ë¥´ê²Œ í‘œì‹œ
5. **JOIN ì¿¼ë¦¬ ìµœì í™”**: ì—°ê²°ëœ ì—”í‹°í‹°ì˜ ì„¸ë¶€ ì •ë³´ í¬í•¨ ì¡°íšŒ

## ğŸ—ï¸ êµ¬í˜„ëœ í•µì‹¬ íŒŒì¼ë“¤

### 1. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
- **í…Œì´ë¸”**: `project_links` 
- **ì¸ë±ìŠ¤**: `idx_project_links_project`, `idx_project_links_entity`, `idx_project_links_project_entity`

### 2. API ì—”ë“œí¬ì¸íŠ¸
- **íŒŒì¼**: `dashboard/src/routes/api/projects/[id]/links/+server.js`
- **ê¸°ëŠ¥**: POST (ìƒì„±), GET (ì¡°íšŒ), DELETE (ì‚­ì œ)
- **íŠ¹ì§•**: JOIN ì¿¼ë¦¬ë¡œ ì—°ê²°ëœ ì—”í‹°í‹° ì •ë³´ í¬í•¨ ë°˜í™˜

### 3. ë°±ì—”ë“œ ë¡œì§
- **íŒŒì¼**: `dashboard/src/lib/server/ProjectManager.js`
- **ë©”ì„œë“œ**: `getProjectRelatedData()`, `calculateProjectStats()`
- **íŠ¹ì§•**: project_links í…Œì´ë¸” ê¸°ë°˜ ë°ì´í„° ì¡°íšŒ

### 4. í”„ë¡ íŠ¸ì—”ë“œ UI
- **íŒŒì¼**: `dashboard/src/routes/projects/[id]/+page.svelte`
- **ê¸°ëŠ¥**: ì—°ê²°ëœ PRD/Task ëª©ë¡ í‘œì‹œ
- **íŠ¹ì§•**: ì‹¤ì‹œê°„ ë°ì´í„° ë¡œë”© ë° ìƒíƒœë³„ ë Œë”ë§

## ğŸš€ ì‚¬ìš© ì¤€ë¹„ ì™„ë£Œ

í”„ë¡œì íŠ¸-PRD/Task/Design ì—°ê²° ê´€ë¦¬ ê¸°ëŠ¥ì´ **ì™„ì „íˆ êµ¬í˜„ë˜ì–´ ì‚¬ìš© ê°€ëŠ¥í•œ ìƒíƒœ**ì…ë‹ˆë‹¤.

### í…ŒìŠ¤íŠ¸ í™˜ê²½
- **ëŒ€ì‹œë³´ë“œ URL**: http://localhost:3302
- **í…ŒìŠ¤íŠ¸ í”„ë¡œì íŠ¸**: http://localhost:3302/projects/25218211-d140-4ff8-9c77-7698fc7f65ee

### ì‚¬ìš© ë°©ë²•
1. **ì—°ê²° ìƒì„±**: POST ìš”ì²­ìœ¼ë¡œ `entity_type`, `entity_id`, `link_type` ì „ë‹¬
2. **ì—°ê²° ì¡°íšŒ**: GET ìš”ì²­ìœ¼ë¡œ í”„ë¡œì íŠ¸ì˜ ëª¨ë“  ì—°ê²° ì •ë³´ íšë“
3. **ì—°ê²° ì‚­ì œ**: DELETE ìš”ì²­ìœ¼ë¡œ íŠ¹ì • ì—°ê²° ì œê±°
4. **UI í™•ì¸**: í”„ë¡œì íŠ¸ ìƒì„¸ í˜ì´ì§€ì—ì„œ ì—°ê²°ëœ í•­ëª©ë“¤ ì‹œê°ì  í™•ì¸

## ğŸ“ ê¸°ìˆ  ì„¸ë¶€ ì‚¬í•­

### API ì‘ë‹µ í˜•ì‹
```javascript
// GET /api/projects/{id}/links
{
  "success": true,
  "links": {
    "prds": [{
      "link_id": 1,
      "entity_type": "prd",
      "entity_id": "prd_1757058128895",
      "title": "AI ì±„íŒ…ë´‡ ì„œë¹„ìŠ¤",
      "status": "draft",
      "priority": "Low"
    }],
    "tasks": [],
    "designs": []
  },
  "total": 1,
  "message": "í”„ë¡œì íŠ¸ ì—°ê²° í•­ëª© 1ê°œ ì¡°íšŒ"
}
```

### ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì˜ˆì‹œ
```sql
-- í”„ë¡œì íŠ¸ ì—°ê²° ì •ë³´ ì¡°íšŒ (JOIN ì¿¼ë¦¬)
SELECT 
  pl.id as link_id,
  pl.entity_type,
  pl.entity_id,
  pl.link_type,
  pl.created_at as linked_at,
  CASE 
    WHEN pl.entity_type = 'prd' THEN p.title
    WHEN pl.entity_type = 'task' THEN t.title  
    WHEN pl.entity_type = 'design' THEN d.title
  END as title,
  CASE 
    WHEN pl.entity_type = 'prd' THEN p.status
    WHEN pl.entity_type = 'task' THEN t.status
    WHEN pl.entity_type = 'design' THEN d.status
  END as status
FROM project_links pl
LEFT JOIN prds p ON pl.entity_type = 'prd' AND pl.entity_id = p.id
LEFT JOIN tasks t ON pl.entity_type = 'task' AND pl.entity_id = t.id  
LEFT JOIN designs d ON pl.entity_type = 'design' AND pl.entity_id = d.id
WHERE pl.project_id = ?
ORDER BY pl.entity_type, pl.created_at DESC
```

## âœ… ê²€ì¦ ì™„ë£Œ í•­ëª©

- [x] ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” êµ¬ì¡° ë° ì¸ë±ìŠ¤
- [x] API ì—”ë“œí¬ì¸íŠ¸ POST/GET/DELETE ë™ì‘
- [x] ë°ì´í„° ìƒì„±/ì¡°íšŒ/ì‚­ì œ ì‚¬ì´í´
- [x] JOIN ì¿¼ë¦¬ë¥¼ í†µí•œ ì—°ê²°ëœ ì—”í‹°í‹° ì •ë³´ í¬í•¨
- [x] í”„ë¡ íŠ¸ì—”ë“œ UIì—ì„œ ì‹¤ì‹œê°„ ë°ì´í„° í‘œì‹œ
- [x] ë¹ˆ ìƒíƒœ ë° ì—ëŸ¬ ì²˜ë¦¬
- [x] ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ë¥¼ í†µí•œ end-to-end ê²€ì¦

## ğŸ”„ ë‹¤ìŒ ì„¸ì…˜ì—ì„œ í•´ì•¼ í•  ì¼

### ì¦‰ì‹œ í™•ì¸ ê°€ëŠ¥í•œ í…ŒìŠ¤íŠ¸ë“¤
1. **ê¸°ë³¸ ê¸°ëŠ¥ ì¬í…ŒìŠ¤íŠ¸**:
   ```bash
   # ì„œë²„ ì‹¤í–‰ í™•ì¸
   npm start
   cd dashboard && npm run dev
   
   # ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸
   http://localhost:3302/projects/25218211-d140-4ff8-9c77-7698fc7f65ee
   ```

2. **API ì§ì ‘ í…ŒìŠ¤íŠ¸**:
   ```javascript
   // POST ì—°ê²° ìƒì„±
   fetch('/api/projects/25218211-d140-4ff8-9c77-7698fc7f65ee/links', {
     method: 'POST',
     headers: {'Content-Type': 'application/json'},
     body: JSON.stringify({entity_type: 'prd', entity_id: 'prd_1757058128895'})
   })
   
   // GET ì—°ê²° ì¡°íšŒ
   fetch('/api/projects/25218211-d140-4ff8-9c77-7698fc7f65ee/links')
   
   // DELETE ì—°ê²° ì‚­ì œ  
   fetch('/api/projects/25218211-d140-4ff8-9c77-7698fc7f65ee/links', {
     method: 'DELETE',
     headers: {'Content-Type': 'application/json'},
     body: JSON.stringify({entity_type: 'prd', entity_id: 'prd_1757058128895'})
   })
   ```

3. **ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ í™•ì¸**:
   ```sql
   SELECT * FROM project_links;
   SELECT * FROM projects;
   SELECT * FROM prds LIMIT 5;
   SELECT * FROM tasks LIMIT 5;
   ```

### ì¶”ê°€ ê°œì„  ê°€ëŠ¥ í•­ëª©ë“¤
1. **í”„ë¡œì íŠ¸ í¸ì§‘ í˜ì´ì§€ì—ì„œ ì—°ê²° ê´€ë¦¬ UI** êµ¬í˜„
2. **Design ì—”í‹°í‹° ì—°ê²° í…ŒìŠ¤íŠ¸** (í˜„ì¬ PRD, Taskë§Œ í…ŒìŠ¤íŠ¸í•¨)
3. **ëŒ€ëŸ‰ ì—°ê²° ìƒì„±/ì‚­ì œ ë°°ì¹˜ API** ì¶”ê°€
4. **ì—°ê²° ì´ë ¥ ì¶”ì ** ê¸°ëŠ¥ êµ¬í˜„
5. **ì—°ê²° ìƒíƒœë³„ í•„í„°ë§** ê¸°ëŠ¥ ì¶”ê°€

### ë¬¸ì œ í•´ê²° ì°¸ê³ ì‚¬í•­
- **SQLiteProjectStorage ì—ëŸ¬**: better-sqlite3 ëª¨ë“ˆ ì´ìŠˆ ìˆìŒ (í˜„ì¬ getDatabase() í•¨ìˆ˜ë¡œ ìš°íšŒ)
- **ì»¬ëŸ¼ëª… ë¶ˆì¼ì¹˜**: ì¼ë¶€ APIì—ì„œ `prd_id`, `dl.entity_type` ë“± ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì»¬ëŸ¼ ì°¸ì¡° ì—ëŸ¬ ìˆìŒ
- **í•¨ìˆ˜ ì°¸ì¡° ì—ëŸ¬**: `this.getDB is not a function`, `stmt.all is not a function` ë“±

**êµ¬í˜„ ì™„ë£Œ ì¼ì‹œ**: 2025-09-09 19:13 (KST)  
**í…ŒìŠ¤íŠ¸ ìƒíƒœ**: ëª¨ë“  í•µì‹¬ ê¸°ëŠ¥ ì •ìƒ ë™ì‘ í™•ì¸  
**ë¬¸ì„œ ID**: 84 (WorkflowMCP ë¬¸ì„œ ê´€ë¦¬ ì‹œìŠ¤í…œ)